<div class="menu-container">
	<h2>Menú del Restaurante</h2>

	<div *ngIf="loading" class="loading">Cargando productos...</div>
	<div *ngIf="error && !loading" class="error">{{ error }}</div>

	<div *ngIf="!loading && !error && menus.length === 0" class="empty">No hay productos en el menú.</div>

	<div *ngIf="!loading && !error && menus.length > 0" class="menu-grid">
		<div *ngFor="let menu of menus" class="menu-card">
			<!-- Imagen del producto -->
			<div class="menu-image" *ngIf="menu.product?.imageUrl">
				<img [src]="menu.product?.imageUrl" [alt]="menu.product?.name" />
			</div>
			<div class="menu-image menu-image-placeholder" *ngIf="!menu.product?.imageUrl">
				<!-- Patrón decorativo de fondo -->
				<div class="placeholder-pattern">
					<i class="bi bi-circle-fill pattern-dot"></i>
					<i class="bi bi-circle-fill pattern-dot"></i>
					<i class="bi bi-circle-fill pattern-dot"></i>
					<i class="bi bi-circle-fill pattern-dot"></i>
					<i class="bi bi-circle-fill pattern-dot"></i>
					<i class="bi bi-circle-fill pattern-dot"></i>
				</div>
				<!-- Iconos decorativos flotantes -->
				<div class="placeholder-icons">
					<i class="bi bi-cup-hot floating-icon icon-1"></i>
					<i class="bi bi-egg-fried floating-icon icon-2"></i>
					<i class="bi bi-basket-fill floating-icon icon-3"></i>
				</div>
				<!-- Icono principal -->
				<div class="placeholder-main">
					<i class="bi bi-dish-fill main-dish-icon"></i>
					<p class="placeholder-text">{{ menu.product?.name || 'Delicioso platillo' }}</p>
				</div>
			</div>

			<!-- Información del producto -->
			<div class="menu-info">
				<h3>{{ menu.product?.name || 'Producto' }}</h3>
				<p>{{ menu.product?.description || 'Sin descripción' }}</p>
				<p class="price">${{ menu.price }}</p>
				
				<!-- Controles de cantidad si está en carrito, botón si no está -->
				@if (!menu.availability) {
					<button class="btn-add-cart" disabled>
						<i class="bi bi-x-circle"></i> No disponible
					</button>
				} @else if (isInCart(menu.id)) {
					<!-- Controles de cantidad cuando ya está en el carrito -->
					<div class="cart-actions-row">
						<div class="quantity-controls-card">
							<button class="qty-btn-card" (click)="decreaseQuantity(menu.id)">
								<i class="bi bi-dash"></i>
							</button>
							<span class="quantity-display">{{ getCartQuantity(menu.id) }}</span>
							<button class="qty-btn-card" (click)="increaseQuantity(menu.id)">
								<i class="bi bi-plus"></i>
							</button>
					</div>
					<!-- Icono de carrito al lado SIN badge -->
					<button class="btn-cart-icon" (click)="openCart()" title="Ver carrito">
						<i class="bi bi-cart3"></i>
					</button>
				</div>
				} @else {
					<!-- Botón agregar al carrito cuando no está -->
					<button class="btn-add-cart" (click)="addToCart(menu)">
						<i class="bi bi-cart-plus"></i> Agregar al carrito
					</button>
				}
			</div>
		</div>
	</div>
	
	<!-- ❌ Botón flotante eliminado - ahora el icono está en cada card -->
</div>
