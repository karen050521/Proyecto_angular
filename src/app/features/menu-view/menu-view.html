<div class="menu-container">
	<h2>Men√∫ del Restaurante</h2>

	<div *ngIf="loading" class="loading">Cargando productos...</div>
	<div *ngIf="error && !loading" class="error">{{ error }}</div>

	<div *ngIf="!loading && !error && menus.length === 0" class="empty">No hay productos en el men√∫.</div>

	<div *ngIf="!loading && !error && menus.length > 0" class="menu-grid">
		<div *ngFor="let menu of menus" class="menu-card">
			<!-- Imagen del producto -->
			<div class="menu-image" *ngIf="menu.product?.imageUrl">
				<img [src]="menu.product?.imageUrl" [alt]="menu.product?.name" />
			</div>
			<div class="menu-image menu-image-placeholder" *ngIf="!menu.product?.imageUrl">
				<span>üçΩÔ∏è</span>
			</div>

			<!-- Informaci√≥n del producto -->
			<div class="menu-info">
				<h3>{{ menu.product?.name || 'Producto' }}</h3>
				<p>{{ menu.product?.description || 'Sin descripci√≥n' }}</p>
				<p class="price">${{ menu.price }}</p>
				
				<!-- Controles de cantidad si est√° en carrito, bot√≥n si no est√° -->
				@if (!menu.availability) {
					<button class="btn-add-cart" disabled>
						<i class="bi bi-x-circle"></i> No disponible
					</button>
				} @else if (isInCart(menu.id)) {
					<!-- Controles de cantidad cuando ya est√° en el carrito -->
					<div class="cart-actions-row">
						<div class="quantity-controls-card">
							<button class="qty-btn-card" (click)="decreaseQuantity(menu.id)">
								<i class="bi bi-dash"></i>
							</button>
							<span class="quantity-display">{{ getCartQuantity(menu.id) }}</span>
							<button class="qty-btn-card" (click)="increaseQuantity(menu.id)">
								<i class="bi bi-plus"></i>
							</button>
						</div>
						<!-- Icono de carrito al lado -->
						<button class="btn-cart-icon" (click)="openCart()" title="Ver carrito">
							<i class="bi bi-cart3"></i>
							<span class="cart-mini-badge">{{ cartStore.itemCount() }}</span>
						</button>
					</div>
				} @else {
					<!-- Bot√≥n agregar al carrito cuando no est√° -->
					<button class="btn-add-cart" (click)="addToCart(menu)">
						<i class="bi bi-cart-plus"></i> Agregar al carrito
					</button>
				}
			</div>
		</div>
	</div>
	
	<!-- ‚ùå Bot√≥n flotante eliminado - ahora el icono est√° en cada card -->
</div>
