<div class="addresses-container">
      <div class="header">
        <h2><i class="bi bi-geo-alt"></i> Gestión de Direcciones</h2>
        <button class="btn-primary" (click)="showCreateForm = true">
          <i class="bi bi-plus-circle"></i> Agregar Dirección
        </button>
      </div>

      <!-- Formulario de Crear/Editar -->
      <div class="form-card" *ngIf="showCreateForm || editingAddress">
        <h3>{{ editingAddress ? 'Editar' : 'Nueva' }} Dirección</h3>
        <form (submit)="saveAddress($event)">
          <div class="form-row">
            <div class="form-group">
              <label>Calle <span class="required">*</span></label>
              <input 
                type="text" 
                [(ngModel)]="formData.street" 
                name="street"
                placeholder="Calle 123 # 45-67"
                required
              />
            </div>

            <div class="form-group">
              <label>Ciudad <span class="required">*</span></label>
              <input 
                type="text" 
                [(ngModel)]="formData.city" 
                name="city"
                placeholder="Bogotá"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Departamento <span class="required">*</span></label>
              <input 
                type="text" 
                [(ngModel)]="formData.state" 
                name="state"
                placeholder="Cundinamarca"
                required
              />
            </div>

            <div class="form-group">
              <label>Código Postal <span class="required">*</span></label>
              <input 
                type="text" 
                [(ngModel)]="formData.postal_code" 
                name="postal_code"
                placeholder="110111"
                required
              />
            </div>
          </div>

          <div class="form-group">
            <label>ID de Orden <span class="required">*</span></label>
            <input 
              type="number" 
              [(ngModel)]="formData.order_id" 
              name="order_id"
              placeholder="1"
              required
            />
          </div>

          <div class="form-group">
            <label>Información Adicional</label>
            <textarea 
              [(ngModel)]="formData.additional_info" 
              name="additional_info"
              placeholder="Casa blanca, portón verde..."
              rows="3"
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" (click)="cancelEdit()">
              Cancelar
            </button>
            <button type="submit" class="btn-primary">
              <i class="bi bi-save"></i> {{ editingAddress ? 'Actualizar' : 'Guardar' }}
            </button>
          </div>
        </form>
      </div>

      <!-- Lista de Direcciones -->
      <div class="addresses-list" *ngIf="!loading; else loadingTemplate">
        <div class="card" *ngFor="let address of addresses">
          <div class="card-header">
            <div class="address-title">
              <i class="bi bi-geo-alt-fill"></i>
              {{ address.street }}
            </div>
            <span class="order-badge">
              <i class="bi bi-receipt"></i>
              Orden #{{ address.order_id }}
            </span>
          </div>

          <div class="card-body">
            <div class="info-row">
              <i class="bi bi-building"></i>
              <span>{{ address.city }}, {{ address.state }}</span>
            </div>
            <div class="info-row">
              <i class="bi bi-mailbox"></i>
              <span>CP: {{ address.postal_code }}</span>
            </div>
            <div class="info-row" *ngIf="address.additional_info">
              <i class="bi bi-info-circle"></i>
              <span>{{ address.additional_info }}</span>
            </div>
          </div>

          <div class="card-actions">
            <button 
              class="btn-icon btn-edit" 
              (click)="editAddress(address)"
              title="Editar"
            >
              <i class="bi bi-pencil"></i>
            </button>
            <button 
              class="btn-icon btn-delete" 
              (click)="deleteAddress(address.id!)"
              title="Eliminar"
            >
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </div>

        <div class="empty-state" *ngIf="addresses.length === 0">
          <i class="bi bi-geo-alt"></i>
          <p>No hay direcciones registradas</p>
          <button class="btn-primary" (click)="showCreateForm = true">
            Agregar la primera
          </button>
        </div>
      </div>

      <ng-template #loadingTemplate>
        <div class="loading">
          <i class="bi bi-arrow-repeat spin"></i>
          <p>Cargando direcciones...</p>
        </div>
      </ng-template>

      <div class="error-message" *ngIf="error">
        <i class="bi bi-exclamation-triangle"></i>
        {{ error }}
      </div>
    </div>