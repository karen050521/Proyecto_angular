<!-- Header con SlideBar -->
<app-header
  [class.sidebar-collapsed]="!sidebarOpen || sidebarMobile"
  [isMobile]="sidebarMobile"
  [sidebarOpen]="sidebarOpen"
  (toggleSidebar)="toggleSidebar()"
  (goToHome)="goToHome()"
>
</app-header>

<!-- Overlay con frosted glass SOLO sobre el navbar -->
@if (sidebarOpen) {
  <div class="navbar-frosted-overlay"></div>
}

<!-- ✅ SlideBar restaurado -->
<app-slide-bar #sidebar (sidebarStateChange)="onSidebarStateChange($event)"></app-slide-bar>

<main
  class="main-content"
  [class.sidebar-open]="sidebarOpen && !sidebarMobile"
  [class.sidebar-closed]="!sidebarOpen && !sidebarMobile"
  [class.sidebar-mobile]="sidebarMobile"
  [class.sidebar-mobile-open]="sidebarMobile && sidebarOpen"
>
  <router-outlet></router-outlet>
</main>

<!-- Sidebar del carrito de compras -->
<app-cart-sidebar></app-cart-sidebar>

<!-- Modal de confirmación de órdenes -->
<app-order-confirmation-modal></app-order-confirmation-modal>

<!-- Chat flotante - Accesible desde cualquier página -->
<app-floating-chat></app-floating-chat>
