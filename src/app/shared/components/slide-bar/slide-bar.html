<!-- Sidebar responsive con iconos Bootstrap -->
<nav class="sidebar" 
     [class.open]="isOpen" 
     [class.mobile]="isMobile" 
     [style.display]="!isMobile || isOpen ? 'flex' : 'none'"
     role="navigation" 
     aria-label="Menú principal">
  
  <div class="sidebar-header">
    <div class="brand" role="link" tabindex="0" (click)="setActiveSection('inicio')" (keydown.enter)="setActiveSection('inicio')" title="Ir al inicio">
      <img src="assets/motorcycle-sidebar.svg" alt="Moto" class="brand-icon" />
    </div>
    <!-- Botón de retracción -->
    <button class="retract-btn" 
            (click)="toggle()" 
            [attr.aria-label]="isOpen ? 'Cerrar menú' : 'Abrir menú'"
            title="Cerrar menú"
            type="button">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <ul class="menu">
    <li>
      <a href="#" 
         [class.active]="activeSection === 'inicio'"
         (click)="setActiveSection('inicio'); $event.preventDefault()">
        <i class="bi bi-house-door"></i>
        <span class="label">Inicio</span>
      </a>
    </li>
    <li>
      <a [routerLink]="'/dashboard'" 
         routerLinkActive="active"
         [class.active]="activeSection === 'dashboard'"
         (click)="setActiveSection('dashboard')">
        <i class="bi bi-graph-up"></i>
        <span class="label">Dashboard</span>
      </a>
    </li>
    <li>
      <a [routerLink]="'/restaurantes'" routerLinkActive="active" [class.active]="activeSection === 'restaurantes'" (click)="setActiveSection('restaurantes')">
        <i class="bi bi-shop"></i>
        <span class="label">Restaurantes</span>
      </a>
    </li>
    <li>
      <a [routerLink]="'/orders'" 
         routerLinkActive="active"
         [class.active]="activeSection === 'pedidos'"
         (click)="setActiveSection('pedidos')">
        <i class="bi bi-cart"></i>
        <span class="label">Pedidos</span>
      </a>
    </li>
    <li>
      <a href="#" 
         [class.active]="adminExpanded"
         (click)="$event.preventDefault(); toggleAdmin();">
        <i class="bi bi-shield-lock"></i>
        <span class="label">Admin</span>
        <i class="bi bi-chevron-down" [class.rotate]="adminExpanded" style="margin-left: auto; font-size: 0.8em; transition: transform 0.2s;"></i>
      </a>
      <ul *ngIf="adminExpanded" class="client-sub-links">
        <li>
          <a [routerLink]="'/admin/drivers'" routerLinkActive="font-bold text-blue-600" (click)="close()">Conductores</a>
        </li>
        <li>
          <a [routerLink]="'/admin/addresses'" routerLinkActive="font-bold text-blue-600" (click)="close()">Direcciones</a>
        </li>
        <li>
          <a [routerLink]="'/admin/manage'" routerLinkActive="font-bold text-blue-600" (click)="close()">Administrar</a>
        </li>
      </ul>
    </li>
  </ul>

  <div class="sidebar-footer">
    <!-- Botón para cambiar tema -->
    <button class="theme-toggle" 
            (click)="themeService.toggleTheme()" 
            [attr.aria-label]="themeService.isDark() ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'"
            type="button">
      <i class="bi" [class.bi-sun-fill]="themeService.isDark()" [class.bi-moon-fill]="!themeService.isDark()"></i>
      <span class="label">{{ themeService.isDark() ? 'Modo Claro' : 'Modo Oscuro' }}</span>
    </button>
    
    <!-- Botón salir -->
    <a href="#" (click)="$event.preventDefault()">
      <i class="bi bi-box-arrow-right"></i>
      <span>Salir</span>
    </a>
  </div>
</nav>
